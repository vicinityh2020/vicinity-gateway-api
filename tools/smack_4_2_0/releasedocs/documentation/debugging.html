<h1>Debugging with Smack</h1><p><a href="index.html">Back</a></p><p>Smack includes two built-in debugging consoles that will let you track all XML traffic between the client and server. A lite debugger and an enhanced debugger contained in <code>smack-debug.jar</code>, and a console debugger in <code>smack-core.jar</code>.</p><p>Debugging mode can be enabled in two different ways:</p>
<ol>
  <li>Add the following line of code <strong>before</strong> creating new connections:</li>
</ol><p><code>SmackConfiguration.DEBUG = true;</code></p>
<ol>
  <li>Set the Java system property <code>smack.debugEnabled</code> to true. The system property can be set on the command line such as:</li>
</ol><p><code>java -Dsmack.debugEnabled=true SomeApp</code></p><p>If you wish to explicitly disable debug mode in your application, including using the command-line parameter, add the following line to your application before opening new connections:</p><p><code>SmackConfiguration.DEBUG = false;</code></p><p>Smack uses the following logic to decide the debugger console to use:</p>
<ol>
  <li>It will first try use the debugger class specified in the Java system property <code>smack.debuggerClass</code>. If you need to develop your own debugger, implement the <code>SmackDebugger</code> interface and then set the system property on the command line such as:</li>
</ol><p><code>java -Dsmack.debuggerClass=my.company.com.MyDebugger SomeApp</code></p>
<ol>
  <li><p>If step 1 fails then Smack will try to use the enhanced debugger. The file <code>smackx-debug.jar</code> contains the enhanced debugger. Therefore you will need to place the jar file in the classpath. For situations where space is an issue you may want to only deploy <code>smack-core.jar</code> in which case the enhanced and lite debugger won't be available, but only the console debugger.</p></li>
  <li><p>The last option if the previous two steps fail is to use the console debugger. The console debugger is a very good option for situations where you need to have low memory footprint.</p></li>
</ol><h2>Enhanced Debugger</h2><p><img src="images/enhanceddebugger.png" alt="Full Debug Window" /> When debugging mode is enabled, a debug window will appear containing tabs for each new created connection. The window will contain the following information:</p>
<ul>
  <li>XMPPConnection tabs -- each tab shows debugging information related to the connection.</li>
  <li>Smack info tab -- shows information about Smack (e.g. Smack version, installed components, etc.). The connection tab will contain the following information:</li>
  <li>All Stanzas -- shows sent and received packets information parsed by Smack.</li>
  <li>Raw Sent Stanzas -- raw XML traffic generated by Smack and sent to the server.</li>
  <li>Raw Received Stanzas -- raw XML traffic sent by the server to the client.</li>
  <li>Ad-hoc message -- allows to send ad-hoc packets of any type.</li>
  <li>Information -- shows connection state and statistics.</li>
</ul><h2>Lite Debugger</h2><p><img src="images/debugwindow.gif" alt="Lite Debug Window" /> When debugging mode is enabled, a debug window will appear when each new connection is created. The window will contain the following information:</p>
<ul>
  <li>Client Traffic (red text) -- raw XML traffic generated by Smack and sent to the server.</li>
  <li>Server Traffic (blue text) -- raw XML traffic sent by the server to the client.</li>
  <li>Interpreted Stanzas (green text) -- shows XML packets from the server as parsed by Smack. Right click on any of the panes to bring up a menu with the choices to copy of the contents to the system clipboard or to clear the contents of the pane.</li>
</ul><p>Copyright (C) Jive Software 2002-2008</p>